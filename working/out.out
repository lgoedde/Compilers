;IR code
;LABEL main []
;LINK  []
;STOREI 7 $T1 []
;STOREI $T1 num []
;STOREI 2 $T2 []
;STOREI $T2 i []
;STOREI 4 $T3 []
;STOREI 42 $T4 []
;SUBI $T4 $T3 $T5 []
;ADDI $T5 num $T6 []
;STOREI $T6 a []
;STOREI 5 $T7 []
;GE i $T7 label2 []
;ADDI num a $T8 []
;STOREI $T8 num []
;STOREI 3 $T9 []
;GE i $T9 label0 []
;ADDI num a $T10 []
;STOREI $T10 num []
;LABEL label0 []
;JUMP label1 []
;LABEL label2 []
;STOREI 5 $T11 []
;LT i $T11 label1 []
;SUBI num a $T12 []
;STOREI $T12 num []
;LABEL label1 []
;WRITEI num []
;RET

;tiny code
var num
var a
var i
push
push r0
push r1
push r2
push r3
jsr main
sys halt
label main
link 12 
move 7 r0
move r0 r1
move 2 r0
move r0 r2
move 4 r0
move 42 r3
subi r3 r0
addi r0 r1
move r1 r0
move 5 r1
cmpi r2 r1
jge label2
move num r1
addi r1 r0
move r0 r1
move 3 r0
cmpi r2 r0
jge label0
move a r0
addi r1 r0
move r0 r1
label label0
jmp label1
label label2
move 5 r0
cmpi i r0
jlt label1
move a r0
subi r1 r0
move r0 r1
label label1
sys writei r1
unlnk 
ret 
end
