;IR code
;LABEL main
;LINK 
;STOREF 7.0 $T0
;STOREF $T0 num
;STOREI 100 $T1
;STOREI $T1 i
;STOREI 1 $T2
;STOREI $T2 j
;STOREF num approx
;STOREI 0 $T9
;LABEL label0
;DIVF num approx $T3
;ADDF approx $T3 $T4
;STOREF 0.5 $T5
;MULTF $T5 $T4 $T6
;STOREF $T6 newapprox
;STOREF newapprox approx
;STOREI 1 $T7
;SUBI i $T7 $T8
;STOREI $T8 i
;NE i $T9 label0
;WRITEF approx
;RET

;tiny code
var num
var approx
var newapprox
var j
var i
push
push r0
push r1
push r2
push r3
jsr main
sys halt
label main
link 0 
move 7.0 r0
move r0 num
move 100 r1
move r1 i
move 1 r2
move r2 j
move num r3
move r3 approx
move 0 r4
label label0
move num r5
divr approx r5
move approx r6
addr r5 r6
move 0.5 r7
move r7 r8
mulr r6 r8
move r8 newapprox
move newapprox r9
move r9 approx
move 1 r10
move i r11
subi r10 r11
move r11 i
cmpi i r4
jne label0
sys writer approx
unlnk 
ret 
end
